webpackJsonp([24],{534:function(e,t,i){i(725);var a=i(191)(i(609),i(791),null,null);e.exports=a.exports},565:function(e,t,i){e.exports={default:i(566),__esModule:!0}},566:function(e,t,i){var a=i(49),n=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}},609:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(565),n=i.n(a),l=(i(13),i(193)),o=i.n(l);t.default={data:function(){return{activeName:"one",isFilterZS:!1,fileList:[],selectDialogFlag:!1,educationId:[],formData:{orgId:""},orgList:[],formSubmited:!1,defaultMaxLevel:0,defaultProvince:{id:"",name:"",level:1},defaultCity:{id:"",name:"",level:2},defaultCounty:{id:"",name:"",level:3},province:[],city:[],county:[],selectedProvince:{},selectedCity:{},selectedCounty:{},isError:!1,errorArr:[],fielname:"",baseURLPage:""}},beforeMount:function(){this.userInfo=JSON.parse(localStorage.getItem("userInfo")),this.defaultMaxLevel=this.userInfo.education.orgInfo.length,this.defaultProvince=this.userInfo.education.orgInfo[0]||{id:"",name:"",level:1},this.defaultCity=this.userInfo.education.orgInfo[1]||{id:"",name:"",level:2},this.defaultCounty=this.userInfo.education.orgInfo[2]||{id:"",name:"",level:3}},mounted:function(){this.baseURLPage=this.baseURL,this.getAreaTree(),null!=this.defaultProvince.id&&""!=this.defaultProvince.id&&this.provinceChange(this.defaultProvince),null!=this.defaultCity.id&&""!=this.defaultCity.id&&this.cityChange(this.defaultCity)},methods:{handleClick:function(e,t){console.log(e,t)},getEduOrgTree:function(){var e=this,t=this.userInfo.education.educationId||"";this.$ajax("/eduadmin/getEduChildrenTree?parentEducationId="+t).then(function(t){if(200==t.code){var i=n()(t.data);i=i.replace(/name/g,"label").replace(/id/g,"value").replace(/childrens/g,"children").replace(/\,\"children\"\:\[\]/g,""),i="["+i+"]",console.log(i),e.orgListsData=JSON.parse(i)}else e.orgListsData=[{}];console.log(e.orgListsData)}).catch(function(){})},getAreaTree:function(){var e=this;this.$ajax("/org/getTree").then(function(t){e.province=t.data}).catch(function(){})},provinceChange:function(e){var t=this;if(this.selectedCity={},this.selectedCounty={},this.selectedProvince=e,null!=e.id&&""!=e.id){var i={parentId:e.id};this.$ajax("/org/getChildren",i).then(function(e){t.city=e.data,1==t.defaultMaxLevel&&(t.defaultCity.name=t.city[0].name,0==t.isFilterZS&&(t.selectedCity.id=t.city[0].id,t.selectedCity.name=t.city[0].name))}).catch(function(){})}},cityChange:function(e){var t=this;if(this.selectedCounty={},this.selectedCity=e,null!=e.id&&""!=e.id){var i={parentId:e.id};this.$ajax("/org/getChildren",i).then(function(e){t.county=e.data,(2==t.defaultMaxLevel||null!=t.selectedCity.id&&""!=t.selectedCity.id)&&(t.defaultCounty.name=t.county[0].name,0==t.isFilterZS&&(t.selectedCounty.id=t.county[0].id,t.selectedCounty.name=t.county[0].name))}).catch(function(){})}},countyChange:function(e){this.selectedCounty=e},getSaveOrgId:function(){var e={id:"",name:"",orgNameStr:""};if(3==this.defaultMaxLevel)e.id=this.defaultCounty.id,e.name=this.defaultCounty.name,e.orgNameStr=this.defaultProvince.name+""+this.defaultCity.name+this.defaultCounty.name;else if(2==this.defaultMaxLevel){var t=this.defaultProvince.name+""+this.defaultCity.name;e.id=this.selectedCounty.id,e.name=this.selectedCounty.name,e.orgNameStr=t+""+this.selectedCounty.name,(null==this.selectedCounty.name||""==this.selectedCounty.name||this.isFilterZS&&"市直属"==this.selectedCounty.name)&&(e.id=this.defaultCity.id,e.name=this.defaultCounty.name,e.orgNameStr=t+""+this.defaultCounty.name)}else if(1==this.defaultMaxLevel){var i=this.defaultProvince.name;null==this.selectedCounty.name||""==this.selectedCounty.name||this.isFilterZS&&"市直属"==this.selectedCounty.name?null==this.selectedCity.name||""==this.selectedCity.name||this.isFilterZS&&("省直属"==this.selectedCity.name||"市直属"==this.selectedCity.name)?(e.id=this.defaultProvince.id,e.name=this.defaultProvince.name):(e.id=this.selectedCity.id,e.name=this.selectedCity.name):(e.id=this.selectedCounty.id,e.name=this.selectedCounty.name),e.orgNameStr=i+""+(this.selectedCity.name||this.defaultCity.name)+(this.selectedCounty.name||this.defaultCounty.name)}return console.log("存储----id="+e.id+",name="+e.name+",nameStr="+e.orgNameStr),e},fileChange:function(e){""==this.orgId&&this.$alert("请选择学校所在区域","提示",{confirmButtonText:"确定"});var t=e.target.files||e.dataTransfer.files;this.fielname=t[0].name},submitForm:function(e){var t=this,i=this.getSaveOrgId();if(console.log(i.id),this.formData.orgId=i.id,console.log(this.formData.orgId),this.formData.orgId||this.$alert("请选择学校所在区域","提示",{confirmButtonText:"确定",callback:function(e){t.$message({type:"info",message:"action: "+e})}}),e.preventDefault(),!this.fielname)return void this.useAlert("error","请选择导入文件",function(){});var a=this,n=new window.FormData(document.getElementById("importScoreForm"));a.formSubmited=!0,console.log(a.formData.orgId),o.a.ajax({url:this.staticResources+"eduadmin/import/importSchool?orgId="+a.formData.orgId,type:"post",data:n,headers:{Cookie:document.cookie},xhrFields:{withCredentials:!0},processData:!1,contentType:!1,success:function(e){200==e.code?(a.formSubmited=!1,a.$alert(e.message,"提示",{confirmButtonText:"确定"})):(a.formSubmited=!1,a.isError=!0,a.errorArr=e.data,a.useAlert("error","导入失败，请稍后重试",function(){}),a.$nextTick(function(){var e=o()("#error");o()("body,html").animate({scrollTop:e.offset().top})}))}})}}}},677:function(e,t,i){t=e.exports=i(523)(),t.push([e.i,"body{font-family:Helvetica,sans-serif}#schoolbatch .el-cascader{margin-left:30px}#schoolbatch a,button,input,keygen,select,textarea{font-family:\\\\5FAE\\8F6F\\96C5\\9ED1}#schoolbatch .el-input.is-disabled .el-input__inner::-webkit-input-placeholder{color:#1f2d3d;font-family:\\\\5FAE\\8F6F\\96C5\\9ED1}#schoolbatch .el-input.is-disabled .el-input__inner:-ms-input-placeholder{color:#1f2d3d;font-family:\\\\5FAE\\8F6F\\96C5\\9ED1}#schoolbatch .el-input.is-disabled .el-input__inner::placeholder{color:#1f2d3d;font-family:\\\\5FAE\\8F6F\\96C5\\9ED1}#schoolbatch .el-input__inner::-webkit-input-placeholder{color:#1f2d3d;font-family:\\\\5FAE\\8F6F\\96C5\\9ED1}#schoolbatch .el-input__inner:-ms-input-placeholder{color:#1f2d3d}#schoolbatch .el-input__inner::placeholder{color:#1f2d3d;font-family:\\\\5FAE\\8F6F\\96C5\\9ED1}","",{version:3,sources:["E:/works/jiaowuzuixin/src/pages/front/education/schoolbatch.vue"],names:[],mappings:"AACA,KACE,gCAAmC,CACpC,AAED,0BACE,gBAAkB,CACnB,AACD,mDAAwD,iCAAmB,CAC1E,AACD,+EAA+E,cAAc,iCAAmB,CAC/G,AACD,0EAA0E,cAAc,iCAAmB,CAC1G,AACD,iEAAiE,cAAc,iCAAmB,CACjG,AACD,yDAAyD,cAAc,iCAAkB,CACxF,AACD,oDAAoD,aAAc,CACjE,AACD,2CAA2C,cAAc,iCAAmB,CAC3E",file:"schoolbatch.vue",sourcesContent:['\nbody {\n  font-family: Helvetica, sans-serif;\n}\n/*返回按钮*/\n#schoolbatch .el-cascader {\n  margin-left: 30px;\n}\n#schoolbatch a, input, textarea, keygen, select, button{font-family:"微软雅黑";\n}\n#schoolbatch .el-input.is-disabled .el-input__inner::-webkit-input-placeholder{color:#1f2d3d;font-family:"微软雅黑";\n}\n#schoolbatch .el-input.is-disabled .el-input__inner:-ms-input-placeholder{color:#1f2d3d;font-family:"微软雅黑";\n}\n#schoolbatch .el-input.is-disabled .el-input__inner::placeholder{color:#1f2d3d;font-family:"微软雅黑";\n}\n#schoolbatch .el-input__inner::-webkit-input-placeholder{color:#1f2d3d;font-family:"微软雅黑"\n}\n#schoolbatch .el-input__inner:-ms-input-placeholder{color:#1f2d3d;\n}\n#schoolbatch .el-input__inner::placeholder{color:#1f2d3d;font-family:"微软雅黑";\n}\n'],sourceRoot:""}])},725:function(e,t,i){var a=i(677);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(524)("db556ee8",a,!0)},767:function(e,t,i){e.exports=i.p+"static/img/schoolinfomoban.c1e4720.png"},791:function(e,t,i){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:e.formSubmited,expression:"formSubmited",modifiers:{lock:!0}}],attrs:{id:"schoolbatch","element-loading-text":"数据导入中..."}},[a("div",{staticClass:"ev-page-return"},[a("router-link",{staticClass:" icon-back",attrs:{to:{path:"/eduSchoolManagement"}}},[e._v("返回 ")])],1),e._v(" "),a("div",{staticClass:"ev-report-page-panel"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"批量导入",name:"one"}},[a("el-form",{attrs:{method:"post",action:e.baseURL+"schadmin/import/importScore",enctype:"multipart/form-data",id:"importScoreForm"}},[a("ol",[a("li",{staticClass:"xiazai"},[a("h3",[a("i",{staticClass:"icon-download-File"}),e._v("1、下载模板")]),e._v(" "),a("p",[e._v("点击下载导入模板     "),a("a",{attrs:{href:e.baseURLPage+"downloads/学校信息模板.xls",target:"_blank"}},[a("el-button",{staticClass:"download",attrs:{type:"primary"}},[e._v("下载")])],1)])]),e._v(" "),a("li",[a("h3",[a("i",{staticClass:"icon-lead-in-class"}),e._v("2、校归属地区：")]),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"orgInfo"}},[a("el-select",{staticClass:"item-text",attrs:{placeholder:e.defaultProvince.name,disabled:e.defaultMaxLevel>=1},on:{change:e.provinceChange},model:{value:e.selectedProvince,callback:function(t){e.selectedProvince=t},expression:"selectedProvince"}},e._l(e.province,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e}})})),e._v(" "),0!=e.city.length||""!=e.defaultProvince.id&&null!=e.defaultProvince.id?a("el-select",{staticClass:"item-text",attrs:{placeholder:e.defaultCity.name,disabled:e.defaultMaxLevel>=2},on:{change:e.cityChange},model:{value:e.selectedCity,callback:function(t){e.selectedCity=t},expression:"selectedCity"}},e._l(e.city,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e}})})):e._e(),e._v(" "),0!=e.county.length?a("el-select",{staticClass:"item-text",attrs:{placeholder:e.defaultCounty.name},on:{change:e.countyChange},model:{value:e.selectedCounty,callback:function(t){e.selectedCounty=t},expression:"selectedCounty"}},e._l(e.county,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e}})})):e._e()],1)],1),e._v(" "),a("li",{staticClass:"file-box"},[a("h3",[a("i",{staticClass:"icon-import-file"}),e._v("3、选择需要导入的EXCEL文件")]),e._v(" "),a("el-form-item",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.fielname,expression:"fielname"}],staticClass:"txt",attrs:{type:"text",name:"textfield",id:"textfield"},domProps:{value:e.fielname},on:{input:function(t){t.target.composing||(e.fielname=t.target.value)}}}),e._v(" "),a("input",{staticClass:"select-btn",attrs:{type:"button",value:"选择文件"}}),e._v(" "),a("input",{staticClass:"upload-demo",attrs:{name:"file",accept:".xls,.xlsx,.csv",type:"file"},on:{change:function(t){e.fileChange(t)}}}),e._v(" "),a("el-button",{staticClass:"submit",attrs:{type:"primary","native-type":"submit"},on:{click:function(t){e.submitForm(t)}}},[e._v("导入")])],1)],1)])]),e._v(" "),a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isError,expression:"isError"}],staticStyle:{"margin-top":"20px","min-height":"500px"}},[a("div",{staticClass:"icon-cue",staticStyle:{"font-size":"14px",color:"red",padding:"10px 0 10px 0"}},[e._v("  出错提示")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.errorArr,border:"",align:"center"}},[a("el-table-column",{attrs:{prop:"fileName",label:"问题文档",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"row",label:"问题行数",width:"200",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"出错人",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"问题描述",align:"center"}})],1)],1),e._v(" "),a("div",{attrs:{id:"error"}})])],1),e._v(" "),a("el-tab-pane",{attrs:{label:"操作指引",name:"two"}},[a("div",{staticClass:"explain"},[a("h3",[a("i",{staticClass:"icon-case"}),e._v("1、导入格式案例")]),e._v(" "),a("div",{staticClass:"report-remark"},[e._v("\n            学校信息模板\n          ")]),e._v(" "),a("img",{attrs:{src:i(767)}}),e._v(" "),a("h3",[a("i",{staticClass:"icon-attentions"}),e._v("2、填写注意事项")]),e._v(" "),a("p",{staticClass:"son-remark"},[e._v("1、“项目负责人”通常为分管教学副校长或教务主任。")]),e._v(" "),a("p",{staticClass:"son-remark"},[e._v("2、“项目负责人”将作为学校的登陆账号，此账号拥有上传参测校长、教师、学生基础信息、下载所有人员测评账号、查看教师和学生测评进度等功能，请务必准确填写。")]),e._v(" "),a("p",{staticClass:"son-remark"},[e._v("3、在填写下列信息时，请从备选项中选择符合自己情况的一项：")]),e._v(" "),a("p",{staticClass:"son-remark level-remark"},[e._v("a  学校类型（小学、完小、初中、九年一贯制、高中、完中、十二年一贯制、职业高中（职高）、中等专业学校（中专））;")]),e._v(" "),a("p",{staticClass:"son-remark level-remark"},[e._v("b  教学起始年级（一年级、二年级、三年级、四年级、五年级、六年级、七年级、八年级、九年级、高一、高二、高三）;")]),e._v(" "),a("p",{staticClass:"son-remark level-remark"},[e._v("c  教学终止年级（一年级、二年级、三年级、四年级、五年级、六年级、七年级、八年级、九年级、高一、高二、高三）;")]),e._v(" "),a("p",{staticClass:"son-remark level-remark"},[e._v("d  地理位置（中心城区、城乡结合部、近郊、远郊）;")]),e._v(" "),a("p",{staticClass:"son-remark level-remark"},[e._v("e  学制（六三制、五四制）;")]),e._v(" "),a("p",{staticClass:"son-remark"},[e._v("4、标明橙色的项为必填项。")]),e._v(" "),a("h3",[a("i",{staticClass:"icon-import-instructions"}),e._v("3、导入说明")]),e._v(" "),a("p",{staticClass:"son-remark"},[e._v("1、文件导入前请严格按照数据要求和格式要求填写。")]),e._v(" "),a("p",{staticClass:"son-remark"},[e._v("2、导入如果出现异常或数据问题，请修改后重新导入。")])])])],1)],1)])},staticRenderFns:[]}}});
//# sourceMappingURL=24.1faf8bdfc2ec0a723e27.js.map